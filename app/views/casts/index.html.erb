<div style="margin-top:10px">
  <br/>
<h4>Searches</h4>

<%= render 'home/query', :cast_query => @casts %>
</div>

<script>
    ajax_voting = function(vote,cast){
        var msg = {Cast:{"id":cast,"vote":vote}};
        $.ajax({
            type: 'POST',
            url: '/vote',
            dataType: 'json',
            data: msg,

            success: function(votevalue){
                total_id = "#total" + cast.toString()

                if (vote=="up")
                {
                    $( "#downvote" + cast.toString()).removeClass( "btn-danger btn-success btn-info")
                    $( "#upvote" + cast.toString()).removeClass( "btn-success btn-info").addClass( "btn-success")
                }
                else
                {
                    $( "#upvote" + cast ).removeClass( "btn-success btn-info")
                    $( "#downvote" + cast ).removeClass( "btn-danger btn-info").addClass( "btn-danger")
                }
                if (votevalue < 0)
                {
                    $(total_id).removeAttr("style").attr("style","color:red");
                }
                else {
                    $(total_id).removeAttr("style").attr("style","color:green");
                }
                var votevalue_abs = Math.abs(votevalue)
                $(total_id).html(votevalue_abs)

            }
        });
    }
</script>
<!--<h1>Listing casts</h1>-->

<!--<table>-->
  <!--<thead>-->
    <!--<tr>-->
      <!--<th>Match type</th>-->
      <!--<th>Red team</th>-->
      <!--<th>Blue team</th>-->
      <!--<th>Best of</th>-->
      <!--<th>Tournament name</th>-->
      <!--<th>Caster</th>-->
      <!--<th>Link</th>-->
      <!--<th>Link2</th>-->
      <!--<th>Upvote</th>-->
      <!--<th>Downvote</th>-->
      <!--<th>Count</th>-->
      <!--<th></th>-->
      <!--<th></th>-->
      <!--<th></th>-->
    <!--</tr>-->
  <!--</thead>-->

  <!--<tbody>-->
    <!--<% @casts.each do |cast| %>-->
      <!--<tr>-->
        <!--<td><%= cast.match_type %></td>-->
        <!--<td><%= cast.red_team %></td>-->
        <!--<td><%= cast.blue_team %></td>-->
        <!--<td><%= cast.best_of %></td>-->
        <!--<td><%= cast.tournament_name %></td>-->
        <!--<td><%= cast.caster %></td>-->
        <!--<td><%= cast.link %></td>-->
        <!--<td><%= cast.link2 %></td>-->
        <!--<td><%= cast.upvote %></td>-->
        <!--<td><%= cast.downvote %></td>-->
        <!--<td><%= cast.count %></td>-->
        <!--<td><%= link_to 'Show', cast %></td>-->
        <!--<td><%= link_to 'Edit', edit_cast_path(cast) %></td>-->
        <!--<td><%= link_to 'Destroy', cast, method: :delete, data: { confirm: 'Are you sure?' } %></td>-->
      <!--</tr>-->
    <!--<% end %>-->
  <!--</tbody>-->
<!--</table>-->

<!--<br>-->

<!--<%= link_to 'New Cast', new_cast_path %>-->
